name: finfocus-analyzer-e2e
runtime: yaml
description: E2E test for analyzer plugin with real AWS resources

# Note: The analyzer is loaded via --policy-pack flag, not plugins.analyzers

resources:
  # Real EC2 instance for accurate cost validation
  test-instance:
    type: aws:ec2:Instance
    properties:
      instanceType: t3.micro
      ami: ${ami.id}
      tags:
        Name: analyzer-e2e-test

variables:
  ami:
    fn::invoke:
      function: aws:ec2/getAmi:getAmi
      arguments:
        mostRecent: true
        owners:
          - amazon
        filters:
          - name: name
            values:
              - amzn2-ami-hvm-*-x86_64-gp2